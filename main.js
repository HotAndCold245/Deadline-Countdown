/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  GrottoSidebarView: () => GrottoSidebarView,
  default: () => CountdownPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var TIMER_COUNT_VIEW = "grotto-countdown";
var DEFAULT_CATEGORY = "General";
var DEFAULT_SETTINGS = {
  deadlineTitle: "",
  deadlineDateTime: (/* @__PURE__ */ new Date()).toISOString().slice(0, 16),
  deadlineFrequency: false,
  categories: [DEFAULT_CATEGORY],
  selectedCategory: DEFAULT_CATEGORY
};
var CountdownPlugin = class extends import_obsidian.Plugin {
  constructor() {
    super(...arguments);
    this.deadlines = [];
  }
  async onload() {
    await this.loadSettings();
    this.registerView(
      TIMER_COUNT_VIEW,
      (leaf) => new GrottoSidebarView(leaf, this)
    );
    (0, import_obsidian.addIcon)("countdown-preset", '<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-timer-icon lucide-timer"><line x1="10" x2="14" y1="2" y2="2"/><line x1="12" x2="15" y1="14" y2="11"/><circle cx="12" cy="14" r="8"/></svg>');
    this.activateView();
    this.addSettingTab(new CountdownSettingsTab(this.app, this));
  }
  async activateView() {
    const leaf = this.app.workspace.getRightLeaf(false);
    if (!leaf) {
      new import_obsidian.Notice("No available right sidebar to activate the view.");
      return;
    }
    const activeView = leaf.view;
    if (!activeView || activeView.getViewType() !== TIMER_COUNT_VIEW) {
      await leaf.setViewState({ type: TIMER_COUNT_VIEW });
      this.app.workspace.revealLeaf(leaf);
    }
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
    if (!this.settings.categories.includes(DEFAULT_CATEGORY)) {
      this.settings.categories.unshift(DEFAULT_CATEGORY);
      await this.saveSettings();
    }
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  onunload() {
    this.app.workspace.getLeavesOfType(TIMER_COUNT_VIEW).forEach((leaf) => leaf.detach());
  }
};
var GrottoSidebarView = class extends import_obsidian.ItemView {
  constructor(leaf, plugin) {
    super(leaf);
    this.plugin = plugin;
  }
  getViewType() {
    return TIMER_COUNT_VIEW;
  }
  getDisplayText() {
    return "Deadline Countdown";
  }
  getIcon() {
    return "countdown-preset";
  }
  async onOpen() {
    this.containerEl.empty();
    this.renderSidebar();
  }
  renderSidebar() {
    this.containerEl.empty();
    const container = this.containerEl.createEl("div", {
      cls: "grotto-deadline-container-sidebar"
    });
    const refreshButtonContainer = container.createEl("div", { cls: "grotto-refresh-button-container" });
    const refreshButton = refreshButtonContainer.createEl("button", { text: "Refresh" });
    refreshButton.addEventListener("click", () => this.refreshSidebar());
    if (!this.plugin.settings.deadlines || this.plugin.settings.deadlines.length === 0) {
      container.createEl("p", { text: "No upcoming deadlines." });
      return;
    }
    const groupedDeadlines = this.groupDeadlinesByCategory(this.plugin.settings.deadlines);
    const sortedCategories = Object.keys(groupedDeadlines).sort((a, b) => a.localeCompare(b));
    for (const category of sortedCategories) {
      const deadlines = groupedDeadlines[category];
      let categorySection = this.containerEl.querySelector(`.grotto-category-section[data-category="${category}"]`);
      if (!categorySection) {
        categorySection = container.createEl("div", {
          cls: "grotto-category-section"
        });
        categorySection.setAttribute("data-category", category);
        categorySection.createEl("h3", { text: category });
      }
      const deadlineList = categorySection.createEl("div", {
        cls: "grotto-deadline-categories"
      });
      deadlines.forEach((deadline) => {
        let deadlineItem = deadlineList.querySelector(`.grotto-deadline-item[data-id="${deadline.title}"]`);
        if (!deadlineItem) {
          const deadlineDate = new Date(deadline.dateTime);
          const now = /* @__PURE__ */ new Date();
          const timeDifference = deadlineDate.getTime() - now.getTime();
          const isUrgent = timeDifference <= 60 * 60 * 1e3;
          deadlineItem = deadlineList.createEl("div", {
            cls: "grotto-deadline-item" + (isUrgent ? " grotto-deadline-urgent" : "")
          });
          deadlineItem.setAttribute("data-id", deadline.title);
          deadlineItem.createEl("span", {
            cls: "grotto-deadline-title",
            text: deadline.title
          });
          const dateEl = deadlineItem.createEl("div", {
            cls: "grotto-deadline-date"
          });
          dateEl.setText(
            deadlineDate.toLocaleString("en-GB", {
              hour: "numeric",
              minute: "numeric",
              hour12: true,
              day: "numeric",
              month: "short",
              year: "numeric"
            })
          );
          const remainingTimeEl = deadlineItem.createEl("div", {
            cls: "grotto-deadline-remaining-time"
          });
          this.updateRemainingTime(deadline, remainingTimeEl);
        }
      });
    }
  }
  refreshSidebar() {
    this.renderSidebar();
  }
  groupDeadlinesByCategory(deadlines) {
    return deadlines.reduce((groups, deadline) => {
      if (!groups[deadline.category]) {
        groups[deadline.category] = [];
      }
      groups[deadline.category].push(deadline);
      return groups;
    }, {});
  }
  // Function to update the remaining time for each deadline
  updateRemainingTime(deadline, remainingTimeEl) {
    const deadlineDate = new Date(deadline.dateTime);
    const now = /* @__PURE__ */ new Date();
    const timeDifference = deadlineDate.getTime() - now.getTime();
    const lessThanOneHour = timeDifference <= 60 * 60 * 1e3;
    if (lessThanOneHour) {
      remainingTimeEl.classList.add("grotto-deadline-urgent");
    } else {
      remainingTimeEl.classList.remove("grotto-deadline-urgent");
    }
    if (timeDifference <= 0) {
      if (deadline.recurrence && typeof deadline.recurrence === "number" && deadline.recurrence > 0) {
        const recurrenceInterval = deadline.recurrence;
        deadlineDate.setDate(deadlineDate.getDate() + recurrenceInterval);
        remainingTimeEl.setText(`Resets: ${this.formatRemainingTime(deadlineDate)}`);
        return;
      } else {
        remainingTimeEl.setText("Deadline passed");
        return;
      }
    }
    if (deadline.recurrence && deadline.recurrence > 0) {
      remainingTimeEl.setText(`Resets: ${this.formatRemainingTime(deadlineDate)}`);
    } else {
      remainingTimeEl.setText(`Ends: ${this.formatRemainingTime(deadlineDate)}`);
    }
  }
  formatRemainingTime(deadlineDate) {
    const now = /* @__PURE__ */ new Date();
    const timeDifference = deadlineDate.getTime() - now.getTime();
    const remainingDays = Math.floor(timeDifference / (1e3 * 3600 * 24));
    const remainingHours = Math.floor(timeDifference % (1e3 * 3600 * 24) / (1e3 * 3600));
    const remainingMinutes = Math.floor(timeDifference % (1e3 * 3600) / (1e3 * 60));
    let remainingTimeText = "";
    if (remainingDays > 0) {
      remainingTimeText += `${remainingDays} days `;
    }
    if (remainingHours > 0) {
      remainingTimeText += `${remainingHours} hours `;
    }
    remainingTimeText += `${remainingMinutes} minutes`;
    return remainingTimeText;
  }
};
var CountdownSettingsTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.deadlines = [];
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    const newDeadline = containerEl.createEl("div", { cls: "setting-group" });
    newDeadline.createEl("div", { cls: "setting-item setting-item-heading" }).createEl("div", { text: "Deadline Controls", cls: "setting-item-name" });
    const deadlineItems = newDeadline.createEl("div", { cls: "setting-items" });
    new import_obsidian.Setting(deadlineItems).setName("Title").setDesc("Set a title for the deadline").addText((text) => {
      text.setPlaceholder("Enter a title");
      text.setValue(this.plugin.settings.deadlineTitle);
      text.onChange((value) => {
        this.plugin.settings.deadlineTitle = value;
      });
    });
    new import_obsidian.Setting(deadlineItems).setName("Date and Time").setDesc("Set a deadline using the calendar and time picker").addText((text) => {
      text.inputEl.type = "datetime-local";
      text.setValue(this.plugin.settings.deadlineDateTime);
      text.onChange((value) => {
        this.plugin.settings.deadlineDateTime = value;
      });
    });
    new import_obsidian.Setting(deadlineItems).setName("Recurrence").setDesc("Enable to set a recurring interval for the deadline").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.deadlineFrequency).onChange(async (value) => {
        this.plugin.settings.deadlineFrequency = value;
        if (!value) {
          this.plugin.settings.selectedRecurrenceValue = 0;
        } else {
          this.plugin.settings.selectedRecurrenceValue = this.plugin.settings.selectedRecurrenceValue || 1;
        }
        if (recurrenceSliderSetting) {
          recurrenceSliderSetting.settingEl.style.display = value ? "" : "none";
        }
        await this.plugin.saveSettings();
      });
    });
    let recurrenceSliderSetting;
    recurrenceSliderSetting = new import_obsidian.Setting(deadlineItems).setName("Recurrence Interval").setDesc("Set how often this deadline repeats (1\u201330 days)").addSlider((slider) => {
      var _a;
      slider.setLimits(1, 30, 1).setValue((_a = this.plugin.settings.selectedRecurrenceValue) != null ? _a : 1).setDynamicTooltip().onChange((value) => {
        this.plugin.settings.selectedRecurrenceValue = Math.floor(value);
      });
    });
    if (!this.plugin.settings.deadlineFrequency) {
      recurrenceSliderSetting.settingEl.style.display = "none";
    }
    let categoryInput = "";
    let textComponent;
    new import_obsidian.Setting(deadlineItems).setName("Category").setDesc("Set a category for the deadline").addText((text) => {
      textComponent = text;
      text.setPlaceholder("Enter a category");
      text.onChange((value) => {
        categoryInput = value.trim();
      });
    });
    new import_obsidian.Setting(deadlineItems).addButton((button) => {
      button.setButtonText("Save Deadline").setCta().onClick(async () => {
        const title = this.plugin.settings.deadlineTitle.trim();
        const dateTime = this.plugin.settings.deadlineDateTime;
        const recurrence = this.plugin.settings.selectedRecurrenceValue;
        let finalCategory = (categoryInput || DEFAULT_CATEGORY).trim();
        if (!this.plugin.settings.categories.includes(finalCategory)) {
          this.plugin.settings.categories.push(finalCategory);
          new import_obsidian.Notice(`New category created: ${finalCategory}`);
        }
        if (!title) {
          new import_obsidian.Notice("Please set a valid title.");
          return;
        }
        if (!dateTime) {
          new import_obsidian.Notice("Please set a date and time for the deadline.");
          return;
        }
        if (!this.plugin.settings.deadlines) this.plugin.settings.deadlines = [];
        this.plugin.settings.deadlines.push({
          title,
          dateTime,
          category: finalCategory,
          recurrence
        });
        this.plugin.settings.deadlineTitle = "";
        this.plugin.settings.deadlineDateTime = (/* @__PURE__ */ new Date()).toISOString().slice(0, 16);
        this.plugin.settings.selectedCategory = DEFAULT_CATEGORY;
        this.plugin.settings.selectedRecurrence = null;
        categoryInput = "";
        textComponent.setValue("");
        await this.plugin.saveSettings();
        this.display();
        new import_obsidian.Notice("Deadline saved successfully!");
      });
    });
    const managesDeadline = containerEl.createEl("div", { cls: "setting-group" });
    managesDeadline.createEl("div", { cls: "setting-item setting-item-heading" }).createEl("div", { text: "Deadline Management", cls: "setting-item-name" });
    const manageDeadlineItems = managesDeadline.createEl("div", { cls: "setting-items" });
    let draggedItem = null;
    const sortedCategories = this.plugin.settings.categories.slice().sort((a, b) => a.toLowerCase().localeCompare(b.toLowerCase()));
    sortedCategories.forEach((category) => {
      const categoryContainer = manageDeadlineItems.createEl("div", { cls: "grotto-category-container" });
      categoryContainer.createEl("div", {
        text: category,
        cls: "grotto-category-header"
      });
      const deadlinesContainer = categoryContainer.createEl("div", { cls: "grotto-deadlines-container" });
      const categoryDeadlines = (this.plugin.settings.deadlines || []).filter((dl) => dl.category === category);
      deadlinesContainer.addEventListener("dragover", (e) => {
        e.preventDefault();
        deadlinesContainer.classList.add("drop-target");
      });
      deadlinesContainer.addEventListener("dragleave", () => {
        deadlinesContainer.classList.remove("drop-target");
      });
      deadlinesContainer.addEventListener("drop", async (e) => {
        e.preventDefault();
        deadlinesContainer.classList.remove("drop-target");
        if (!draggedItem) {
          return;
        }
        const draggedDeadline = draggedItem._deadlineRef;
        draggedDeadline.category = category;
        const globalIdx = this.plugin.settings.deadlines.indexOf(draggedDeadline);
        if (globalIdx > -1) this.plugin.settings.deadlines.splice(globalIdx, 1);
        this.plugin.settings.deadlines.push(draggedDeadline);
        await this.plugin.saveSettings();
        this.display();
      });
      categoryDeadlines.forEach((dl) => {
        const dlEl = deadlinesContainer.createEl("div", { cls: "grotto-deadline-card" });
        const cardContainer = dlEl.createEl("div", { cls: "grotto-deadline-card-container" });
        const titleEl = cardContainer.createEl("span", { text: dl.title, cls: "grotto-deadline-title" });
        titleEl.setText(dl.title);
        const dateEl = cardContainer.createEl("div", { cls: "grotto-deadline-date" });
        const deadlineDate = new Date(dl.dateTime);
        dateEl.setText(
          deadlineDate.toLocaleString("en-GB", {
            hour: "numeric",
            minute: "numeric",
            hour12: true,
            day: "numeric",
            month: "short",
            year: "numeric"
          })
        );
        const remainingTimeEl = cardContainer.createEl("div", { cls: "grotto-deadline-remaining" });
        function updateRemainingTime() {
          const deadlineDate2 = new Date(dl.dateTime);
          const now = /* @__PURE__ */ new Date();
          const timeDifference = deadlineDate2.getTime() - now.getTime();
          if (timeDifference <= 0) {
            if (dl.recurrence && typeof dl.recurrence === "number" && dl.recurrence > 0) {
              const recurrenceInterval = dl.recurrence;
              deadlineDate2.setDate(deadlineDate2.getDate() + recurrenceInterval);
              dl.dateTime = deadlineDate2.toISOString();
              dateEl.setText(`${deadlineDate2.toLocaleString("en-GB", {
                hour: "numeric",
                minute: "numeric",
                hour12: true,
                day: "numeric",
                month: "short",
                year: "numeric"
              })}`);
              remainingTimeEl.setText(`Resets: ${formatRemainingTime(deadlineDate2)}`);
              return;
            } else {
              remainingTimeEl.setText("Deadline passed");
              dateEl.setText(`Deadline was at ${deadlineDate2.toLocaleString("en-GB", {
                hour: "numeric",
                minute: "numeric",
                hour12: true,
                day: "numeric",
                month: "short",
                year: "numeric"
              })}`);
              return;
            }
          }
          if (dl.recurrence && dl.recurrence > 0) {
            remainingTimeEl.setText(`Resets: ${formatRemainingTime(deadlineDate2)}`);
          } else {
            remainingTimeEl.setText(`Ends: ${formatRemainingTime(deadlineDate2)}`);
          }
        }
        function formatRemainingTime(deadlineDate2) {
          const now = /* @__PURE__ */ new Date();
          const timeDifference = deadlineDate2.getTime() - now.getTime();
          const remainingDays = Math.floor(timeDifference / (1e3 * 3600 * 24));
          const remainingHours = Math.floor(timeDifference % (1e3 * 3600 * 24) / (1e3 * 3600));
          const remainingMinutes = Math.floor(timeDifference % (1e3 * 3600) / (1e3 * 60));
          let remainingTimeText = "";
          if (remainingDays > 0) {
            remainingTimeText += `${remainingDays} days `;
          }
          if (remainingHours > 0) {
            remainingTimeText += `${remainingHours} hours `;
          }
          remainingTimeText += `${remainingMinutes} minutes`;
          return remainingTimeText;
        }
        updateRemainingTime();
        setInterval(updateRemainingTime, 1e3);
        const handle = dlEl.createEl("span", { cls: "grotto-drag-handle" });
        handle.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu"><path d="M4 6h16M4 12h16M4 18h16"></path></svg>`;
        const deleteIcon = dlEl.createEl("span", { cls: "grotto-delete-deadline-icon" });
        deleteIcon.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x"><path d="M6 18L18 6M6 6l12 12"></path></svg>`;
        deleteIcon.onclick = async () => {
          const idx = this.plugin.settings.deadlines.indexOf(dl);
          if (idx > -1) {
            this.plugin.settings.deadlines.splice(idx, 1);
          }
          await this.plugin.saveSettings();
          this.display();
          new import_obsidian.Notice("Deadline removed");
        };
        dlEl.draggable = true;
        dlEl._deadlineRef = dl;
        dlEl.addEventListener("dragstart", () => {
          draggedItem = dlEl;
        });
        dlEl.addEventListener("dragend", () => {
          draggedItem = null;
        });
      });
      if (categoryDeadlines.length === 0 && category !== DEFAULT_CATEGORY) {
        const deleteCategoryBtn = deadlinesContainer.createEl("button", { text: "Delete Category", cls: "grotto-delete-category-btn" });
        deleteCategoryBtn.onclick = async () => {
          const idx = this.plugin.settings.categories.indexOf(category);
          if (idx > -1) this.plugin.settings.categories.splice(idx, 1);
          await this.plugin.saveSettings();
          this.display();
          new import_obsidian.Notice(`Category "${category}" deleted`);
        };
      }
    });
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHtcbiAgICBBcHAsXG4gICAgYWRkSWNvbixcbiAgICBQbHVnaW4sXG4gICAgSXRlbVZpZXcsXG4gICAgV29ya3NwYWNlTGVhZixcbiAgICBQbHVnaW5TZXR0aW5nVGFiLFxuICAgIFNldHRpbmcsXG4gICAgTm90aWNlLFxuICAgIFRleHRDb21wb25lbnRcbn0gZnJvbSAnb2JzaWRpYW4nO1xuXG5jb25zdCBUSU1FUl9DT1VOVF9WSUVXID0gXCJncm90dG8tY291bnRkb3duXCI7XG5jb25zdCBERUZBVUxUX0NBVEVHT1JZID0gXCJHZW5lcmFsXCI7XG5cbmludGVyZmFjZSBDb3VudGRvd25TZXR0aW5ncyB7XG4gICAgZGVhZGxpbmVUaXRsZTogc3RyaW5nO1xuICAgIGRlYWRsaW5lRGF0ZVRpbWU6IHN0cmluZztcbiAgICBkZWFkbGluZUZyZXF1ZW5jeTogYm9vbGVhbjtcbiAgICBjYXRlZ29yaWVzOiBzdHJpbmdbXTtcbiAgICBzZWxlY3RlZENhdGVnb3J5Pzogc3RyaW5nO1xuICAgIHNlbGVjdGVkUmVjdXJyZW5jZT86IHN0cmluZyB8IG51bGw7XG4gICAgc2VsZWN0ZWRSZWN1cnJlbmNlVmFsdWU/OiBudW1iZXI7XG4gICAgZGVhZGxpbmVzPzogRGVhZGxpbmVbXTtcbn1cblxuaW50ZXJmYWNlIERlYWRsaW5lIHtcbiAgICB0aXRsZTogc3RyaW5nO1xuICAgIGRhdGVUaW1lOiBzdHJpbmc7XG4gICAgY2F0ZWdvcnk6IHN0cmluZztcbiAgICByZWN1cnJlbmNlPzogbnVtYmVyO1xufVxuXG5jb25zdCBERUZBVUxUX1NFVFRJTkdTOiBDb3VudGRvd25TZXR0aW5ncyA9IHtcbiAgICBkZWFkbGluZVRpdGxlOiAnJyxcbiAgICBkZWFkbGluZURhdGVUaW1lOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTYpLFxuICAgIGRlYWRsaW5lRnJlcXVlbmN5OiBmYWxzZSxcbiAgICBjYXRlZ29yaWVzOiBbREVGQVVMVF9DQVRFR09SWV0sXG4gICAgc2VsZWN0ZWRDYXRlZ29yeTogREVGQVVMVF9DQVRFR09SWSxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvdW50ZG93blBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG4gICAgc2V0dGluZ3M6IENvdW50ZG93blNldHRpbmdzO1xuICAgIGRlYWRsaW5lczogRGVhZGxpbmVbXSA9IFtdO1xuICAgIGFzeW5jIG9ubG9hZCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcbiAgICAgICAgdGhpcy5yZWdpc3RlclZpZXcoXG4gICAgICAgICAgICBUSU1FUl9DT1VOVF9WSUVXLFxuICAgICAgICAgICAgKGxlYWY6IFdvcmtzcGFjZUxlYWYpID0+IG5ldyBHcm90dG9TaWRlYmFyVmlldyhsZWFmLCB0aGlzKVxuICAgICAgICApO1xuICAgICAgICBhZGRJY29uKCdjb3VudGRvd24tcHJlc2V0JywgJzxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHg9XCIwcHhcIiB5PVwiMHB4XCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiMlwiIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiIGNsYXNzPVwibHVjaWRlIGx1Y2lkZS10aW1lci1pY29uIGx1Y2lkZS10aW1lclwiPjxsaW5lIHgxPVwiMTBcIiB4Mj1cIjE0XCIgeTE9XCIyXCIgeTI9XCIyXCIvPjxsaW5lIHgxPVwiMTJcIiB4Mj1cIjE1XCIgeTE9XCIxNFwiIHkyPVwiMTFcIi8+PGNpcmNsZSBjeD1cIjEyXCIgY3k9XCIxNFwiIHI9XCI4XCIvPjwvc3ZnPicpO1xuICAgICAgICB0aGlzLmFjdGl2YXRlVmlldygpO1xuICAgICAgICB0aGlzLmFkZFNldHRpbmdUYWIobmV3IENvdW50ZG93blNldHRpbmdzVGFiKHRoaXMuYXBwLCB0aGlzKSk7XG4gICAgfVxuICAgIGFzeW5jIGFjdGl2YXRlVmlldygpIHtcbiAgICAgICAgY29uc3QgbGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRSaWdodExlYWYoZmFsc2UpO1xuICAgICAgICBpZiAoIWxlYWYpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ05vIGF2YWlsYWJsZSByaWdodCBzaWRlYmFyIHRvIGFjdGl2YXRlIHRoZSB2aWV3LicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFjdGl2ZVZpZXcgPSBsZWFmLnZpZXc7XG4gICAgICAgIGlmICghYWN0aXZlVmlldyB8fCBhY3RpdmVWaWV3LmdldFZpZXdUeXBlKCkgIT09IFRJTUVSX0NPVU5UX1ZJRVcpIHtcbiAgICAgICAgICAgIGF3YWl0IGxlYWYuc2V0Vmlld1N0YXRlKHsgdHlwZTogVElNRVJfQ09VTlRfVklFVyB9KTtcbiAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5yZXZlYWxMZWFmKGxlYWYpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XG4gICAgICAgIGlmICghdGhpcy5zZXR0aW5ncy5jYXRlZ29yaWVzLmluY2x1ZGVzKERFRkFVTFRfQ0FURUdPUlkpKSB7XG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzLmNhdGVnb3JpZXMudW5zaGlmdChERUZBVUxUX0NBVEVHT1JZKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuICAgICAgICBhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuICAgIH1cbiAgICBvbnVubG9hZCgpIHtcbiAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlXG4gICAgICAgICAgICAuZ2V0TGVhdmVzT2ZUeXBlKFRJTUVSX0NPVU5UX1ZJRVcpXG4gICAgICAgICAgICAuZm9yRWFjaCgobGVhZikgPT4gbGVhZi5kZXRhY2goKSk7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgR3JvdHRvU2lkZWJhclZpZXcgZXh0ZW5kcyBJdGVtVmlldyB7XG4gICAgcGx1Z2luOiBDb3VudGRvd25QbHVnaW47XG4gICAgY29uc3RydWN0b3IobGVhZjogV29ya3NwYWNlTGVhZiwgcGx1Z2luOiBDb3VudGRvd25QbHVnaW4pIHtcbiAgICAgICAgc3VwZXIobGVhZik7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIH1cbiAgICBnZXRWaWV3VHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIFRJTUVSX0NPVU5UX1ZJRVc7XG4gICAgfVxuICAgIGdldERpc3BsYXlUZXh0KCkge1xuICAgICAgICByZXR1cm4gXCJEZWFkbGluZSBDb3VudGRvd25cIjtcbiAgICB9XG4gICAgZ2V0SWNvbigpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gXCJjb3VudGRvd24tcHJlc2V0XCI7XG4gICAgfVxuICAgIGFzeW5jIG9uT3BlbigpIHtcbiAgICAgICAgdGhpcy5jb250YWluZXJFbC5lbXB0eSgpO1xuICAgICAgICB0aGlzLnJlbmRlclNpZGViYXIoKTtcbiAgICB9XG4gICAgcmVuZGVyU2lkZWJhcigpIHtcbiAgICAgICAgdGhpcy5jb250YWluZXJFbC5lbXB0eSgpO1xuICAgICAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiZGl2XCIsIHtcbiAgICAgICAgICAgIGNsczogXCJncm90dG8tZGVhZGxpbmUtY29udGFpbmVyLXNpZGViYXJcIlxuICAgICAgICB9KTtcbiAgICAgICAgLy8gUmVmcmVzaCBCdXR0b25cbiAgICAgICAgY29uc3QgcmVmcmVzaEJ1dHRvbkNvbnRhaW5lciA9IGNvbnRhaW5lci5jcmVhdGVFbChcImRpdlwiLCB7IGNsczogXCJncm90dG8tcmVmcmVzaC1idXR0b24tY29udGFpbmVyXCIgfSk7XG4gICAgICAgIGNvbnN0IHJlZnJlc2hCdXR0b24gPSByZWZyZXNoQnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJSZWZyZXNoXCIgfSk7XG4gICAgICAgIHJlZnJlc2hCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMucmVmcmVzaFNpZGViYXIoKSk7XG4gICAgICAgIC8vIEluIGNhc2UgdGhlcmUgYXJlIG5vIGFjdGl2ZSBkZWFkbGluZXNcbiAgICAgICAgaWYgKCF0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWFkbGluZXMgfHwgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVhZGxpbmVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgY29udGFpbmVyLmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IFwiTm8gdXBjb21pbmcgZGVhZGxpbmVzLlwiIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIERlYWRsaW5lc1xuICAgICAgICBjb25zdCBncm91cGVkRGVhZGxpbmVzID0gdGhpcy5ncm91cERlYWRsaW5lc0J5Q2F0ZWdvcnkodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVhZGxpbmVzKTtcbiAgICAgICAgY29uc3Qgc29ydGVkQ2F0ZWdvcmllcyA9IE9iamVjdC5rZXlzKGdyb3VwZWREZWFkbGluZXMpLnNvcnQoKGEsIGIpID0+IGEubG9jYWxlQ29tcGFyZShiKSk7XG4gICAgICAgIGZvciAoY29uc3QgY2F0ZWdvcnkgb2Ygc29ydGVkQ2F0ZWdvcmllcykge1xuICAgICAgICAgICAgY29uc3QgZGVhZGxpbmVzID0gZ3JvdXBlZERlYWRsaW5lc1tjYXRlZ29yeV07XG4gICAgICAgICAgICBsZXQgY2F0ZWdvcnlTZWN0aW9uID0gdGhpcy5jb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKGAuZ3JvdHRvLWNhdGVnb3J5LXNlY3Rpb25bZGF0YS1jYXRlZ29yeT1cIiR7Y2F0ZWdvcnl9XCJdYCk7XG4gICAgICAgICAgICBpZiAoIWNhdGVnb3J5U2VjdGlvbikge1xuICAgICAgICAgICAgICAgIGNhdGVnb3J5U2VjdGlvbiA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgICAgICAgICAgICAgICBjbHM6ICdncm90dG8tY2F0ZWdvcnktc2VjdGlvbidcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjYXRlZ29yeVNlY3Rpb24uc2V0QXR0cmlidXRlKCdkYXRhLWNhdGVnb3J5JywgY2F0ZWdvcnkpO1xuICAgICAgICAgICAgICAgIGNhdGVnb3J5U2VjdGlvbi5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6IGNhdGVnb3J5IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZGVhZGxpbmVMaXN0ID0gY2F0ZWdvcnlTZWN0aW9uLmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xzOiAnZ3JvdHRvLWRlYWRsaW5lLWNhdGVnb3JpZXMnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGRlYWRsaW5lcy5mb3JFYWNoKChkZWFkbGluZSkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBkZWFkbGluZUl0ZW0gPSBkZWFkbGluZUxpc3QucXVlcnlTZWxlY3RvcihgLmdyb3R0by1kZWFkbGluZS1pdGVtW2RhdGEtaWQ9XCIke2RlYWRsaW5lLnRpdGxlfVwiXWApO1xuICAgICAgICAgICAgICAgIGlmICghZGVhZGxpbmVJdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIERldGVybWluZSBpZiB0aGUgZGVhZGxpbmUgaXMgdXJnZW50IChsZXNzIHRoYW4gMSBob3VyIGF3YXkpXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlYWRsaW5lRGF0ZSA9IG5ldyBEYXRlKGRlYWRsaW5lLmRhdGVUaW1lKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGltZURpZmZlcmVuY2UgPSBkZWFkbGluZURhdGUuZ2V0VGltZSgpIC0gbm93LmdldFRpbWUoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNVcmdlbnQgPSB0aW1lRGlmZmVyZW5jZSA8PSA2MCAqIDYwICogMTAwMDtcbiAgICAgICAgICAgICAgICAgICAgZGVhZGxpbmVJdGVtID0gZGVhZGxpbmVMaXN0LmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbHM6ICdncm90dG8tZGVhZGxpbmUtaXRlbScgKyAoaXNVcmdlbnQgPyAnIGdyb3R0by1kZWFkbGluZS11cmdlbnQnIDogJycpLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgZGVhZGxpbmVJdGVtLnNldEF0dHJpYnV0ZSgnZGF0YS1pZCcsIGRlYWRsaW5lLnRpdGxlKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gRGVhZGxpbmUgVGl0bGVcbiAgICAgICAgICAgICAgICAgICAgZGVhZGxpbmVJdGVtLmNyZWF0ZUVsKCdzcGFuJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xzOiAnZ3JvdHRvLWRlYWRsaW5lLXRpdGxlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGRlYWRsaW5lLnRpdGxlXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAvLyBEZWFkbGluZSBEYXRlXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVFbCA9IGRlYWRsaW5lSXRlbS5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xzOiAnZ3JvdHRvLWRlYWRsaW5lLWRhdGUnLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUVsLnNldFRleHQoXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWFkbGluZURhdGUudG9Mb2NhbGVTdHJpbmcoJ2VuLUdCJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvdXI6ICdudW1lcmljJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW51dGU6ICdudW1lcmljJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBob3VyMTI6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF5OiAnbnVtZXJpYycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9udGg6ICdzaG9ydCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeWVhcjogJ251bWVyaWMnXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAvLyBSZW1haW5pbmcgVGltZVxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZW1haW5pbmdUaW1lRWwgPSBkZWFkbGluZUl0ZW0uY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsczogJ2dyb3R0by1kZWFkbGluZS1yZW1haW5pbmctdGltZScsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdGhlIHJlbWFpbmluZyB0aW1lXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUmVtYWluaW5nVGltZShkZWFkbGluZSwgcmVtYWluaW5nVGltZUVsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZWZyZXNoU2lkZWJhcigpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJTaWRlYmFyKCk7XG4gICAgfVxuICAgIGdyb3VwRGVhZGxpbmVzQnlDYXRlZ29yeShkZWFkbGluZXM6IERlYWRsaW5lW10pIHtcbiAgICAgICAgcmV0dXJuIGRlYWRsaW5lcy5yZWR1Y2UoKGdyb3VwcywgZGVhZGxpbmUpID0+IHtcbiAgICAgICAgICAgIGlmICghZ3JvdXBzW2RlYWRsaW5lLmNhdGVnb3J5XSkge1xuICAgICAgICAgICAgICAgIGdyb3Vwc1tkZWFkbGluZS5jYXRlZ29yeV0gPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdyb3Vwc1tkZWFkbGluZS5jYXRlZ29yeV0ucHVzaChkZWFkbGluZSk7XG4gICAgICAgICAgICByZXR1cm4gZ3JvdXBzO1xuICAgICAgICB9LCB7fSBhcyB7IFtrZXk6IHN0cmluZ106IERlYWRsaW5lW10gfSk7XG4gICAgfVxuICAgIC8vIEZ1bmN0aW9uIHRvIHVwZGF0ZSB0aGUgcmVtYWluaW5nIHRpbWUgZm9yIGVhY2ggZGVhZGxpbmVcbiAgICB1cGRhdGVSZW1haW5pbmdUaW1lKGRlYWRsaW5lOiBEZWFkbGluZSwgcmVtYWluaW5nVGltZUVsOiBIVE1MRWxlbWVudCkge1xuICAgICAgICBjb25zdCBkZWFkbGluZURhdGUgPSBuZXcgRGF0ZShkZWFkbGluZS5kYXRlVGltZSk7XG4gICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgICAgIGNvbnN0IHRpbWVEaWZmZXJlbmNlID0gZGVhZGxpbmVEYXRlLmdldFRpbWUoKSAtIG5vdy5nZXRUaW1lKCk7XG4gICAgICAgIGNvbnN0IGxlc3NUaGFuT25lSG91ciA9IHRpbWVEaWZmZXJlbmNlIDw9IDYwICogNjAgKiAxMDAwO1xuICAgICAgICBpZiAobGVzc1RoYW5PbmVIb3VyKSB7XG4gICAgICAgICAgICByZW1haW5pbmdUaW1lRWwuY2xhc3NMaXN0LmFkZCgnZ3JvdHRvLWRlYWRsaW5lLXVyZ2VudCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVtYWluaW5nVGltZUVsLmNsYXNzTGlzdC5yZW1vdmUoJ2dyb3R0by1kZWFkbGluZS11cmdlbnQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGltZURpZmZlcmVuY2UgPD0gMCkge1xuICAgICAgICAgICAgaWYgKGRlYWRsaW5lLnJlY3VycmVuY2UgJiYgdHlwZW9mIGRlYWRsaW5lLnJlY3VycmVuY2UgPT09ICdudW1iZXInICYmIGRlYWRsaW5lLnJlY3VycmVuY2UgPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVjdXJyZW5jZUludGVydmFsID0gZGVhZGxpbmUucmVjdXJyZW5jZTtcbiAgICAgICAgICAgICAgICBkZWFkbGluZURhdGUuc2V0RGF0ZShkZWFkbGluZURhdGUuZ2V0RGF0ZSgpICsgcmVjdXJyZW5jZUludGVydmFsKTtcbiAgICAgICAgICAgICAgICByZW1haW5pbmdUaW1lRWwuc2V0VGV4dChgUmVzZXRzOiAke3RoaXMuZm9ybWF0UmVtYWluaW5nVGltZShkZWFkbGluZURhdGUpfWApO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVtYWluaW5nVGltZUVsLnNldFRleHQoJ0RlYWRsaW5lIHBhc3NlZCcpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZGVhZGxpbmUucmVjdXJyZW5jZSAmJiBkZWFkbGluZS5yZWN1cnJlbmNlID4gMCkge1xuICAgICAgICAgICAgcmVtYWluaW5nVGltZUVsLnNldFRleHQoYFJlc2V0czogJHt0aGlzLmZvcm1hdFJlbWFpbmluZ1RpbWUoZGVhZGxpbmVEYXRlKX1gKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlbWFpbmluZ1RpbWVFbC5zZXRUZXh0KGBFbmRzOiAke3RoaXMuZm9ybWF0UmVtYWluaW5nVGltZShkZWFkbGluZURhdGUpfWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZvcm1hdFJlbWFpbmluZ1RpbWUoZGVhZGxpbmVEYXRlOiBEYXRlKSB7XG4gICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgICAgIGNvbnN0IHRpbWVEaWZmZXJlbmNlID0gZGVhZGxpbmVEYXRlLmdldFRpbWUoKSAtIG5vdy5nZXRUaW1lKCk7XG4gICAgICAgIGNvbnN0IHJlbWFpbmluZ0RheXMgPSBNYXRoLmZsb29yKHRpbWVEaWZmZXJlbmNlIC8gKDEwMDAgKiAzNjAwICogMjQpKTtcbiAgICAgICAgY29uc3QgcmVtYWluaW5nSG91cnMgPSBNYXRoLmZsb29yKCh0aW1lRGlmZmVyZW5jZSAlICgxMDAwICogMzYwMCAqIDI0KSkgLyAoMTAwMCAqIDM2MDApKTtcbiAgICAgICAgY29uc3QgcmVtYWluaW5nTWludXRlcyA9IE1hdGguZmxvb3IoKHRpbWVEaWZmZXJlbmNlICUgKDEwMDAgKiAzNjAwKSkgLyAoMTAwMCAqIDYwKSk7XG4gICAgICAgIGxldCByZW1haW5pbmdUaW1lVGV4dCA9ICcnO1xuICAgICAgICBpZiAocmVtYWluaW5nRGF5cyA+IDApIHtcbiAgICAgICAgICAgIHJlbWFpbmluZ1RpbWVUZXh0ICs9IGAke3JlbWFpbmluZ0RheXN9IGRheXMgYDtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVtYWluaW5nSG91cnMgPiAwKSB7XG4gICAgICAgICAgICByZW1haW5pbmdUaW1lVGV4dCArPSBgJHtyZW1haW5pbmdIb3Vyc30gaG91cnMgYDtcbiAgICAgICAgfVxuICAgICAgICByZW1haW5pbmdUaW1lVGV4dCArPSBgJHtyZW1haW5pbmdNaW51dGVzfSBtaW51dGVzYDtcbiAgICAgICAgcmV0dXJuIHJlbWFpbmluZ1RpbWVUZXh0O1xuICAgIH1cbn1cblxuY2xhc3MgQ291bnRkb3duU2V0dGluZ3NUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcbiAgICBwbHVnaW46IENvdW50ZG93blBsdWdpbjtcbiAgICBkZWFkbGluZXM6IERlYWRsaW5lW10gPSBbXTtcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBDb3VudGRvd25QbHVnaW4pIHtcbiAgICAgICAgc3VwZXIoYXBwLCBwbHVnaW4pO1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB9XG4gICAgZGlzcGxheSgpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGFpbmVyRWwuZW1wdHkoKTtcbiAgICAgICAgLy8gRGVhZGxpbmUgQ29udHJvbHNcbiAgICAgICAgY29uc3QgbmV3RGVhZGxpbmUgPSBjb250YWluZXJFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzZXR0aW5nLWdyb3VwJyB9KTtcbiAgICAgICAgbmV3RGVhZGxpbmVcbiAgICAgICAgICAgIC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzZXR0aW5nLWl0ZW0gc2V0dGluZy1pdGVtLWhlYWRpbmcnIH0pXG4gICAgICAgICAgICAuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogJ0RlYWRsaW5lIENvbnRyb2xzJywgY2xzOiAnc2V0dGluZy1pdGVtLW5hbWUnIH0pO1xuICAgICAgICBjb25zdCBkZWFkbGluZUl0ZW1zID0gbmV3RGVhZGxpbmUuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc2V0dGluZy1pdGVtcycgfSk7XG4gICAgICAgIC8vIFRpdGxlXG4gICAgICAgIG5ldyBTZXR0aW5nKGRlYWRsaW5lSXRlbXMpXG4gICAgICAgICAgICAuc2V0TmFtZShcIlRpdGxlXCIpXG4gICAgICAgICAgICAuc2V0RGVzYyhcIlNldCBhIHRpdGxlIGZvciB0aGUgZGVhZGxpbmVcIilcbiAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PiB7XG4gICAgICAgICAgICAgICAgdGV4dC5zZXRQbGFjZWhvbGRlcignRW50ZXIgYSB0aXRsZScpO1xuICAgICAgICAgICAgICAgIHRleHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVhZGxpbmVUaXRsZSk7XG4gICAgICAgICAgICAgICAgdGV4dC5vbkNoYW5nZSgodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVhZGxpbmVUaXRsZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIC8vIERhdGUgYW5kIFRpbWVcbiAgICAgICAgbmV3IFNldHRpbmcoZGVhZGxpbmVJdGVtcylcbiAgICAgICAgICAgIC5zZXROYW1lKFwiRGF0ZSBhbmQgVGltZVwiKVxuICAgICAgICAgICAgLnNldERlc2MoXCJTZXQgYSBkZWFkbGluZSB1c2luZyB0aGUgY2FsZW5kYXIgYW5kIHRpbWUgcGlja2VyXCIpXG4gICAgICAgICAgICAuYWRkVGV4dCgodGV4dCkgPT4ge1xuICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC50eXBlID0gXCJkYXRldGltZS1sb2NhbFwiO1xuICAgICAgICAgICAgICAgIHRleHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVhZGxpbmVEYXRlVGltZSk7XG4gICAgICAgICAgICAgICAgdGV4dC5vbkNoYW5nZSgodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVhZGxpbmVEYXRlVGltZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIC8vIFJlY3VycmVuY2UgVG9nZ2xlXG4gICAgICAgIG5ldyBTZXR0aW5nKGRlYWRsaW5lSXRlbXMpXG4gICAgICAgICAgICAuc2V0TmFtZSgnUmVjdXJyZW5jZScpXG4gICAgICAgICAgICAuc2V0RGVzYygnRW5hYmxlIHRvIHNldCBhIHJlY3VycmluZyBpbnRlcnZhbCBmb3IgdGhlIGRlYWRsaW5lJylcbiAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHtcbiAgICAgICAgICAgICAgICB0b2dnbGVcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRlYWRsaW5lRnJlcXVlbmN5KVxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWFkbGluZUZyZXF1ZW5jeSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2V0IHJlY3VycmVuY2UgdG8gMCB3aGVuIHRvZ2dsZSBpcyBvZmZcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zZWxlY3RlZFJlY3VycmVuY2VWYWx1ZSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTZXQgcmVjdXJyZW5jZSB0byB0aGUgc2xpZGVyIHZhbHVlIHdoZW4gdG9nZ2xlIGlzIG9uXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zZWxlY3RlZFJlY3VycmVuY2VWYWx1ZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnNlbGVjdGVkUmVjdXJyZW5jZVZhbHVlIHx8IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBIaWRlIG9yIHNob3cgdGhlIHJlY3VycmVuY2Ugc2xpZGVyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVjdXJyZW5jZVNsaWRlclNldHRpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWN1cnJlbmNlU2xpZGVyU2V0dGluZy5zZXR0aW5nRWwuc3R5bGUuZGlzcGxheSA9IHZhbHVlID8gJycgOiAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTYXZlIHNldHRpbmdzIGFmdGVyIHRoZSBjaGFuZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAvLyBSZWN1cnJlbmNlIEludGVydmFsIFNsaWRlclxuICAgICAgICBsZXQgcmVjdXJyZW5jZVNsaWRlclNldHRpbmc6IFNldHRpbmc7XG4gICAgICAgIHJlY3VycmVuY2VTbGlkZXJTZXR0aW5nID0gbmV3IFNldHRpbmcoZGVhZGxpbmVJdGVtcylcbiAgICAgICAgICAgIC5zZXROYW1lKCdSZWN1cnJlbmNlIEludGVydmFsJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdTZXQgaG93IG9mdGVuIHRoaXMgZGVhZGxpbmUgcmVwZWF0cyAoMVx1MjAxMzMwIGRheXMpJylcbiAgICAgICAgICAgIC5hZGRTbGlkZXIoc2xpZGVyID0+IHtcbiAgICAgICAgICAgICAgICBzbGlkZXIuc2V0TGltaXRzKDEsIDMwLCAxKVxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2VsZWN0ZWRSZWN1cnJlbmNlVmFsdWUgPz8gMSlcbiAgICAgICAgICAgICAgICAgICAgLnNldER5bmFtaWNUb29sdGlwKClcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnNlbGVjdGVkUmVjdXJyZW5jZVZhbHVlID0gTWF0aC5mbG9vcih2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIC8vIENvbnRyb2wgdmlzaWJpbGl0eSBvZiB0aGUgc2xpZGVyXG4gICAgICAgIGlmICghdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVhZGxpbmVGcmVxdWVuY3kpIHtcbiAgICAgICAgICAgIHJlY3VycmVuY2VTbGlkZXJTZXR0aW5nLnNldHRpbmdFbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICB9XG4gICAgICAgIC8vIENhdGVnb3J5XG4gICAgICAgIGxldCBjYXRlZ29yeUlucHV0OiBzdHJpbmcgPSBcIlwiO1xuICAgICAgICBsZXQgdGV4dENvbXBvbmVudDogVGV4dENvbXBvbmVudDtcbiAgICAgICAgbmV3IFNldHRpbmcoZGVhZGxpbmVJdGVtcylcbiAgICAgICAgICAgIC5zZXROYW1lKCdDYXRlZ29yeScpXG4gICAgICAgICAgICAuc2V0RGVzYygnU2V0IGEgY2F0ZWdvcnkgZm9yIHRoZSBkZWFkbGluZScpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHtcbiAgICAgICAgICAgICAgICB0ZXh0Q29tcG9uZW50ID0gdGV4dDtcbiAgICAgICAgICAgICAgICB0ZXh0LnNldFBsYWNlaG9sZGVyKCdFbnRlciBhIGNhdGVnb3J5Jyk7XG4gICAgICAgICAgICAgICAgdGV4dC5vbkNoYW5nZSgodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnlJbnB1dCA9IHZhbHVlLnRyaW0oKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIC8vIFNhdmUgRGVhZGxpbmVcbiAgICAgICAgbmV3IFNldHRpbmcoZGVhZGxpbmVJdGVtcylcbiAgICAgICAgICAgIC5hZGRCdXR0b24oYnV0dG9uID0+IHtcbiAgICAgICAgICAgICAgICBidXR0b24uc2V0QnV0dG9uVGV4dChcIlNhdmUgRGVhZGxpbmVcIilcbiAgICAgICAgICAgICAgICAgICAgLnNldEN0YSgpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpdGxlID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVhZGxpbmVUaXRsZS50cmltKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRlVGltZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmRlYWRsaW5lRGF0ZVRpbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZWN1cnJlbmNlID0gdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2VsZWN0ZWRSZWN1cnJlbmNlVmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBEZXRlcm1pbmUgZmluYWwgY2F0ZWdvcnlcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmaW5hbENhdGVnb3J5ID0gKGNhdGVnb3J5SW5wdXQgfHwgREVGQVVMVF9DQVRFR09SWSkudHJpbSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnBsdWdpbi5zZXR0aW5ncy5jYXRlZ29yaWVzLmluY2x1ZGVzKGZpbmFsQ2F0ZWdvcnkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2F0ZWdvcmllcy5wdXNoKGZpbmFsQ2F0ZWdvcnkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYE5ldyBjYXRlZ29yeSBjcmVhdGVkOiAke2ZpbmFsQ2F0ZWdvcnl9YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJbiBjYXNlIGEgdGl0bGUgaXMgbm90IHNldFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aXRsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJQbGVhc2Ugc2V0IGEgdmFsaWQgdGl0bGUuXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEluIGNhc2UgZGF0ZS90aW1lIGlzIHJlc2V0XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWRhdGVUaW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIlBsZWFzZSBzZXQgYSBkYXRlIGFuZCB0aW1lIGZvciB0aGUgZGVhZGxpbmUuXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEluaXRpYWxpemUgZGVhZGxpbmVzIGFycmF5IGlmIG5lZWRlZFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWFkbGluZXMpIHRoaXMucGx1Z2luLnNldHRpbmdzLmRlYWRsaW5lcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2F2ZSBkZWFkbGluZVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVhZGxpbmVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVUaW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBmaW5hbENhdGVnb3J5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY3VycmVuY2VcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVzZXQgZGVhZGxpbmcgc2V0dGluZ3NcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmRlYWRsaW5lVGl0bGUgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmRlYWRsaW5lRGF0ZVRpbWUgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2VsZWN0ZWRDYXRlZ29yeSA9IERFRkFVTFRfQ0FURUdPUlk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zZWxlY3RlZFJlY3VycmVuY2UgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnlJbnB1dCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dENvbXBvbmVudC5zZXRWYWx1ZSgnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIkRlYWRsaW5lIHNhdmVkIHN1Y2Nlc3NmdWxseSFcIik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIC8vIERlYWRsaW5lIE1hbmFnZW1lbnQgc2VjdGlvblxuICAgICAgICBjb25zdCBtYW5hZ2VzRGVhZGxpbmUgPSBjb250YWluZXJFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzZXR0aW5nLWdyb3VwJyB9KTtcbiAgICAgICAgbWFuYWdlc0RlYWRsaW5lXG4gICAgICAgICAgICAuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc2V0dGluZy1pdGVtIHNldHRpbmctaXRlbS1oZWFkaW5nJyB9KVxuICAgICAgICAgICAgLmNyZWF0ZUVsKCdkaXYnLCB7IHRleHQ6ICdEZWFkbGluZSBNYW5hZ2VtZW50JywgY2xzOiAnc2V0dGluZy1pdGVtLW5hbWUnIH0pO1xuICAgICAgICBjb25zdCBtYW5hZ2VEZWFkbGluZUl0ZW1zID0gbWFuYWdlc0RlYWRsaW5lLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3NldHRpbmctaXRlbXMnIH0pO1xuICAgICAgICBsZXQgZHJhZ2dlZEl0ZW06IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XG4gICAgICAgIGNvbnN0IHNvcnRlZENhdGVnb3JpZXMgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jYXRlZ29yaWVzXG4gICAgICAgICAgICAuc2xpY2UoKVxuICAgICAgICAgICAgLnNvcnQoKGEsIGIpID0+IGEudG9Mb3dlckNhc2UoKS5sb2NhbGVDb21wYXJlKGIudG9Mb3dlckNhc2UoKSkpO1xuICAgICAgICBzb3J0ZWRDYXRlZ29yaWVzLmZvckVhY2goY2F0ZWdvcnkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY2F0ZWdvcnlDb250YWluZXIgPSBtYW5hZ2VEZWFkbGluZUl0ZW1zLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2dyb3R0by1jYXRlZ29yeS1jb250YWluZXInIH0pO1xuICAgICAgICAgICAgLy8gQ2F0ZWdvcnkgaGVhZGVyXG4gICAgICAgICAgICBjYXRlZ29yeUNvbnRhaW5lci5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIHRleHQ6IGNhdGVnb3J5LFxuICAgICAgICAgICAgICAgIGNsczogJ2dyb3R0by1jYXRlZ29yeS1oZWFkZXInXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIERlYWRsaW5lcyBpbiBjYXRlZ29yaWVzXG4gICAgICAgICAgICBjb25zdCBkZWFkbGluZXNDb250YWluZXIgPSBjYXRlZ29yeUNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdncm90dG8tZGVhZGxpbmVzLWNvbnRhaW5lcicgfSk7XG4gICAgICAgICAgICBjb25zdCBjYXRlZ29yeURlYWRsaW5lcyA9ICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWFkbGluZXMgfHwgW10pLmZpbHRlcihkbCA9PiBkbC5jYXRlZ29yeSA9PT0gY2F0ZWdvcnkpO1xuICAgICAgICAgICAgLy8gRHJhZ2dpbmcgYmVoYXZpb3VyXG4gICAgICAgICAgICBkZWFkbGluZXNDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLCBlID0+IHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgZGVhZGxpbmVzQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2Ryb3AtdGFyZ2V0Jyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGRlYWRsaW5lc0NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdkcmFnbGVhdmUnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgZGVhZGxpbmVzQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2Ryb3AtdGFyZ2V0Jyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGRlYWRsaW5lc0NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgYXN5bmMgZSA9PiB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGRlYWRsaW5lc0NvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdkcm9wLXRhcmdldCcpO1xuICAgICAgICAgICAgICAgIGlmICghZHJhZ2dlZEl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBkcmFnZ2VkRGVhZGxpbmUgPSAoZHJhZ2dlZEl0ZW0gYXMgYW55KS5fZGVhZGxpbmVSZWYgYXMgRGVhZGxpbmU7XG4gICAgICAgICAgICAgICAgZHJhZ2dlZERlYWRsaW5lLmNhdGVnb3J5ID0gY2F0ZWdvcnk7XG4gICAgICAgICAgICAgICAgLy8gUmVtb3ZlIHRoZSBkZWFkbGluZSBmcm9tIGl0cyBwcmV2aW91cyBwb3NpdGlvblxuICAgICAgICAgICAgICAgIGNvbnN0IGdsb2JhbElkeCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmRlYWRsaW5lcyEuaW5kZXhPZihkcmFnZ2VkRGVhZGxpbmUpO1xuICAgICAgICAgICAgICAgIGlmIChnbG9iYWxJZHggPiAtMSkgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVhZGxpbmVzIS5zcGxpY2UoZ2xvYmFsSWR4LCAxKTtcbiAgICAgICAgICAgICAgICAvLyBJbnNlcnQgdGhlIGRlYWRsaW5lIGludG8gdGhlIGVtcHR5IGNhdGVnb3J5XG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVhZGxpbmVzIS5wdXNoKGRyYWdnZWREZWFkbGluZSk7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNhdGVnb3J5RGVhZGxpbmVzLmZvckVhY2goZGwgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRsRWwgPSBkZWFkbGluZXNDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnZ3JvdHRvLWRlYWRsaW5lLWNhcmQnIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNhcmRDb250YWluZXIgPSBkbEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2dyb3R0by1kZWFkbGluZS1jYXJkLWNvbnRhaW5lcicgfSk7XG4gICAgICAgICAgICAgICAgLy8gUmVuZGVyIHRoZSBUaXRsZVxuICAgICAgICAgICAgICAgIGNvbnN0IHRpdGxlRWwgPSBjYXJkQ29udGFpbmVyLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiBkbC50aXRsZSwgY2xzOiAnZ3JvdHRvLWRlYWRsaW5lLXRpdGxlJyB9KTtcbiAgICAgICAgICAgICAgICB0aXRsZUVsLnNldFRleHQoZGwudGl0bGUpO1xuICAgICAgICAgICAgICAgIC8vIFJlbmRlciB0aGUgRGVhZGxpbmUgRGF0ZVxuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVFbCA9IGNhcmRDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnZ3JvdHRvLWRlYWRsaW5lLWRhdGUnIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlYWRsaW5lRGF0ZSA9IG5ldyBEYXRlKGRsLmRhdGVUaW1lKTtcbiAgICAgICAgICAgICAgICBkYXRlRWwuc2V0VGV4dChcbiAgICAgICAgICAgICAgICAgICAgZGVhZGxpbmVEYXRlLnRvTG9jYWxlU3RyaW5nKCdlbi1HQicsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhvdXI6ICdudW1lcmljJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbnV0ZTogJ251bWVyaWMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgaG91cjEyOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF5OiAnbnVtZXJpYycsXG4gICAgICAgICAgICAgICAgICAgICAgICBtb250aDogJ3Nob3J0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHllYXI6ICdudW1lcmljJ1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgLy8gUmVuZGVyIHRoZSBSZW1haW5pbmcgVGltZVxuICAgICAgICAgICAgICAgIGNvbnN0IHJlbWFpbmluZ1RpbWVFbCA9IGNhcmRDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnZ3JvdHRvLWRlYWRsaW5lLXJlbWFpbmluZycgfSk7XG4gICAgICAgICAgICAgICAgLy8gRnVuY3Rpb24gdG8gdXBkYXRlIHRoZSByZW1haW5pbmcgdGltZVxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVJlbWFpbmluZ1RpbWUoKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlYWRsaW5lRGF0ZSA9IG5ldyBEYXRlKGRsLmRhdGVUaW1lKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGltZURpZmZlcmVuY2UgPSBkZWFkbGluZURhdGUuZ2V0VGltZSgpIC0gbm93LmdldFRpbWUoKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIGRlYWRsaW5lIGhhcyBwYXNzZWRcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRpbWVEaWZmZXJlbmNlIDw9IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkbC5yZWN1cnJlbmNlICYmIHR5cGVvZiBkbC5yZWN1cnJlbmNlID09PSAnbnVtYmVyJyAmJiBkbC5yZWN1cnJlbmNlID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhhbmRsZSByZWN1cnJlbmNlIGlmIGRlYWRsaW5lIGhhcyBwYXNzZWQgYW5kIHJlY3VycmVuY2UgaXMgc2V0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVjdXJyZW5jZUludGVydmFsID0gZGwucmVjdXJyZW5jZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWFkbGluZURhdGUuc2V0RGF0ZShkZWFkbGluZURhdGUuZ2V0RGF0ZSgpICsgcmVjdXJyZW5jZUludGVydmFsKTsgLy8gVXBkYXRlIGRlYWRsaW5lIGRhdGUgdG8gbmV4dCByZWN1cnJlbmNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGwuZGF0ZVRpbWUgPSBkZWFkbGluZURhdGUudG9JU09TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlRWwuc2V0VGV4dChgJHtkZWFkbGluZURhdGUudG9Mb2NhbGVTdHJpbmcoJ2VuLUdCJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBob3VyOiAnbnVtZXJpYycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbnV0ZTogJ251bWVyaWMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBob3VyMTI6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRheTogJ251bWVyaWMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb250aDogJ3Nob3J0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeWVhcjogJ251bWVyaWMnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtYWluaW5nVGltZUVsLnNldFRleHQoYFJlc2V0czogJHtmb3JtYXRSZW1haW5pbmdUaW1lKGRlYWRsaW5lRGF0ZSl9YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGVyZSdzIG5vIHJlY3VycmVuY2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1haW5pbmdUaW1lRWwuc2V0VGV4dCgnRGVhZGxpbmUgcGFzc2VkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZUVsLnNldFRleHQoYERlYWRsaW5lIHdhcyBhdCAke2RlYWRsaW5lRGF0ZS50b0xvY2FsZVN0cmluZygnZW4tR0InLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvdXI6ICdudW1lcmljJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWludXRlOiAnbnVtZXJpYycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvdXIxMjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF5OiAnbnVtZXJpYycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vbnRoOiAnc2hvcnQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5ZWFyOiAnbnVtZXJpYydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgaXQncyBhIHJlY3VycmluZyBkZWFkbGluZSwgc2hvdyBcIkRlYWRsaW5lIHJlc2V0cyBpbi4uLlwiXG4gICAgICAgICAgICAgICAgICAgIGlmIChkbC5yZWN1cnJlbmNlICYmIGRsLnJlY3VycmVuY2UgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZW1haW5pbmdUaW1lRWwuc2V0VGV4dChgUmVzZXRzOiAke2Zvcm1hdFJlbWFpbmluZ1RpbWUoZGVhZGxpbmVEYXRlKX1gKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIGl0J3MgYSBub24tcmVjdXJyaW5nIGRlYWRsaW5lLCBzaG93IFwiRGVhZGxpbmUgYXBwcm9hY2hlcyBpbi4uLlwiXG4gICAgICAgICAgICAgICAgICAgICAgICByZW1haW5pbmdUaW1lRWwuc2V0VGV4dChgRW5kczogJHtmb3JtYXRSZW1haW5pbmdUaW1lKGRlYWRsaW5lRGF0ZSl9YCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGZvcm1hdCB0aGUgcmVtYWluaW5nIHRpbWVcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBmb3JtYXRSZW1haW5pbmdUaW1lKGRlYWRsaW5lRGF0ZTogRGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0aW1lRGlmZmVyZW5jZSA9IGRlYWRsaW5lRGF0ZS5nZXRUaW1lKCkgLSBub3cuZ2V0VGltZSgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZW1haW5pbmdEYXlzID0gTWF0aC5mbG9vcih0aW1lRGlmZmVyZW5jZSAvICgxMDAwICogMzYwMCAqIDI0KSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlbWFpbmluZ0hvdXJzID0gTWF0aC5mbG9vcigodGltZURpZmZlcmVuY2UgJSAoMTAwMCAqIDM2MDAgKiAyNCkpIC8gKDEwMDAgKiAzNjAwKSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlbWFpbmluZ01pbnV0ZXMgPSBNYXRoLmZsb29yKCh0aW1lRGlmZmVyZW5jZSAlICgxMDAwICogMzYwMCkpIC8gKDEwMDAgKiA2MCkpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgcmVtYWluaW5nVGltZVRleHQgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlbWFpbmluZ0RheXMgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZW1haW5pbmdUaW1lVGV4dCArPSBgJHtyZW1haW5pbmdEYXlzfSBkYXlzIGA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlbWFpbmluZ0hvdXJzID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVtYWluaW5nVGltZVRleHQgKz0gYCR7cmVtYWluaW5nSG91cnN9IGhvdXJzIGA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmVtYWluaW5nVGltZVRleHQgKz0gYCR7cmVtYWluaW5nTWludXRlc30gbWludXRlc2A7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZW1haW5pbmdUaW1lVGV4dDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSByZW1haW5pbmcgdGltZSBldmVyeSBzZWNvbmRcbiAgICAgICAgICAgICAgICB1cGRhdGVSZW1haW5pbmdUaW1lKCk7XG4gICAgICAgICAgICAgICAgc2V0SW50ZXJ2YWwodXBkYXRlUmVtYWluaW5nVGltZSwgMTAwMCk7XG4gICAgICAgICAgICAgICAgLy8gRFJBRyBIQU5ETEVcbiAgICAgICAgICAgICAgICBjb25zdCBoYW5kbGUgPSBkbEVsLmNyZWF0ZUVsKCdzcGFuJywgeyBjbHM6ICdncm90dG8tZHJhZy1oYW5kbGUnIH0pO1xuICAgICAgICAgICAgICAgIGhhbmRsZS5pbm5lckhUTUwgPSBgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCIxOFwiIGhlaWdodD1cIjE4XCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiMlwiIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiIGNsYXNzPVwibHVjaWRlIGx1Y2lkZS1tZW51XCI+PHBhdGggZD1cIk00IDZoMTZNNCAxMmgxNk00IDE4aDE2XCI+PC9wYXRoPjwvc3ZnPmA7XG4gICAgICAgICAgICAgICAgLy8gREVMRVRFIElDT05cbiAgICAgICAgICAgICAgICBjb25zdCBkZWxldGVJY29uID0gZGxFbC5jcmVhdGVFbCgnc3BhbicsIHsgY2xzOiAnZ3JvdHRvLWRlbGV0ZS1kZWFkbGluZS1pY29uJyB9KTtcbiAgICAgICAgICAgICAgICBkZWxldGVJY29uLmlubmVySFRNTCA9IGA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB3aWR0aD1cIjE4XCIgaGVpZ2h0PVwiMThcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIyXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCIgY2xhc3M9XCJsdWNpZGUgbHVjaWRlLXhcIj48cGF0aCBkPVwiTTYgMThMMTggNk02IDZsMTIgMTJcIj48L3BhdGg+PC9zdmc+YDsgLy8gSW5zZXJ0IGx1Y2lkZS14IGljb24gYXMgU1ZHXG4gICAgICAgICAgICAgICAgLy8gSGFuZGxlIGNsaWNrIG9uIGRlbGV0ZSBpY29uXG4gICAgICAgICAgICAgICAgZGVsZXRlSWNvbi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHggPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWFkbGluZXMhLmluZGV4T2YoZGwpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaWR4ID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmRlYWRsaW5lcyEuc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdEZWFkbGluZSByZW1vdmVkJyk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBkbEVsLmRyYWdnYWJsZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgKGRsRWwgYXMgYW55KS5fZGVhZGxpbmVSZWYgPSBkbDtcbiAgICAgICAgICAgICAgICAvLyBEcmFnIGV2ZW50c1xuICAgICAgICAgICAgICAgIGRsRWwuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ3N0YXJ0JywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBkcmFnZ2VkSXRlbSA9IGRsRWw7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZGxFbC5hZGRFdmVudExpc3RlbmVyKCdkcmFnZW5kJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBkcmFnZ2VkSXRlbSA9IG51bGw7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIERlbGV0ZSBidXR0b24gZm9yIGVtcHR5IGNhdGVnb3JpZXNcbiAgICAgICAgICAgIGlmIChjYXRlZ29yeURlYWRsaW5lcy5sZW5ndGggPT09IDAgJiYgY2F0ZWdvcnkgIT09IERFRkFVTFRfQ0FURUdPUlkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkZWxldGVDYXRlZ29yeUJ0biA9IGRlYWRsaW5lc0NvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnRGVsZXRlIENhdGVnb3J5JywgY2xzOiAnZ3JvdHRvLWRlbGV0ZS1jYXRlZ29yeS1idG4nIH0pO1xuICAgICAgICAgICAgICAgIGRlbGV0ZUNhdGVnb3J5QnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmNhdGVnb3JpZXMuaW5kZXhPZihjYXRlZ29yeSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpZHggPiAtMSkgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2F0ZWdvcmllcy5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBDYXRlZ29yeSBcIiR7Y2F0ZWdvcnl9XCIgZGVsZXRlZGApO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuXG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxzQkFVTztBQUVQLElBQU0sbUJBQW1CO0FBQ3pCLElBQU0sbUJBQW1CO0FBb0J6QixJQUFNLG1CQUFzQztBQUFBLEVBQ3hDLGVBQWU7QUFBQSxFQUNmLG1CQUFrQixvQkFBSSxLQUFLLEdBQUUsWUFBWSxFQUFFLE1BQU0sR0FBRyxFQUFFO0FBQUEsRUFDdEQsbUJBQW1CO0FBQUEsRUFDbkIsWUFBWSxDQUFDLGdCQUFnQjtBQUFBLEVBQzdCLGtCQUFrQjtBQUN0QjtBQUVBLElBQXFCLGtCQUFyQixjQUE2Qyx1QkFBTztBQUFBLEVBQXBEO0FBQUE7QUFFSSxxQkFBd0IsQ0FBQztBQUFBO0FBQUEsRUFDekIsTUFBTSxTQUF3QjtBQUMxQixVQUFNLEtBQUssYUFBYTtBQUN4QixTQUFLO0FBQUEs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
